var levinfo={};levinfo.stabs=function(){var e=$(".js-tab-link");e.on("click",function(){t($(this))});var t=function(e){var t=e.parents(".js-tabs-parent"),i=t.find(".js-tab");e.hasClass("active")?(e.removeClass("active"),i.slideUp()):(e.addClass("active"),e.siblings().hasClass("active")?i.eq(e.index()).show().siblings().hide():i.eq(e.index()).slideDown().siblings().hide()),e.siblings().removeClass("active")}},levinfo.selects=function(){$("select").each(function(){var e=$(this).width()+20;$(this).selectmenu({width:e})})},levinfo.fancybox=function(){$(".js-fancybox").fancybox({prevEffect:"none",nextEffect:"none",margin:[20,150,20,150],padding:[20,20,20,20],helpers:{title:{type:"inside",position:"bottom"},thumbs:{width:80,height:60}},beforeLoad:function(){},afterShow:function(){}})},levinfo.fotorama=function(){var e=$(".js-fotorama").fotorama({height:$(".js-slider").height(),width:"100%",fit:"contain",arrows:!1,nav:!1,loop:!0,click:!1}),t=e.data("fotorama");$(".js-slider .js-prev").on("click",function(){return t.show("<"),!1}),$(".js-slider .js-next").on("click",function(){return t.show(">"),!1}),$(".js-fororama").on("click",function(){alert(1)})},levinfo.audio=function(){$(".js-audio-open").on("click",function(){var e=$(this).parents(".js-audio-cont");return e.hasClass("js-audio-opened")?!1:(e.find(".js-audio").slideToggle(),!1)}),$(".js-audio-opened").find(".js-audio").show()},levinfo.simpletabs=function(){var e=$(".js-stab"),t=$(".js-slink"),i=function(i){t.filter('[data-name="'+i+'"]').addClass("active").siblings().removeClass("active"),e.filter('[data-tab="'+i+'"]').show().siblings().hide()},n=function(){var e=t.first().attr("data-name");i(e),t.on("click",function(){i($(this).attr("data-name"))})};n()},levinfo.lawPopup=function(){var e=$(".js-open-law"),t=$(".js-law-popup"),i=$(".js-law-overlay"),n=$(".js-law-item"),a=$(".js-law-close"),o=$(".js-law-prev"),s=$(".js-law-next"),r=!1,l=!1,d=!0,c=!1,f=function(e,a){if(d){var f='[data-law-id="'+e+'"]',u=t.filter(f),v=n.filter(f);if($("html").css("overflow","hidden"),a){d=!1;var m=l,h=u;"next"==a&&m.addClass("faded"),"prev"==a&&m.addClass("faded-right"),h.addClass("from-fade").show(),setTimeout(function(){h.removeClass("from-fade")},10),setTimeout(function(){m.removeClass("faded faded-right").hide(),d=!0},250)}else u.siblings(".js-law-popup").hide(),u.show();i.fadeIn(),v.next("[data-law-id]").length?s.show():s.hide(),v.prev("[data-law-id]").length?o.show():o.hide(),r=v,l=u,i.scrollTop(0),c=!0}},u=function(){i.fadeOut(function(){$("html").removeAttr("style"),t.hide(),c=!1})},v=function(){e.on("click",function(){var e=$(this).parents(".js-law-item").attr("data-law-id");return f(e,!1),!1}),o.on("click",function(e){var t=r.prev().attr("data-law-id");return f(t,"prev"),e.stopPropagation(),!1}),s.on("click",function(e){var t=r.next().attr("data-law-id");return f(t,"next"),e.stopPropagation(),!1}),i.on("click",function(){u()}),t.on("click",function(e){e.stopPropagation()}),$(document).on("keydown",function(e){c&&(39==e.keyCode&&s.is(":visible")&&s.trigger("click"),37==e.keyCode&&o.is(":visible")&&o.trigger("click"))}),a.on("click",function(){return u(),!1})};v()},levinfo.newsText=function(){var e=$(".js-news-text"),t=e.find("img");t.each(function(){$(this).hide();var e,t=$(this).attr("src"),i=$(this).attr("alt"),n=$(this).parent("p");n.prev("p").length?e=n.prev("p"):n.next("p").length&&(e=n.next("p"));var a='<div class="news-img js-fancybox" rel="gallery" href="'+t+'" title="'+i+'">                        <img class="img-photo" src="'+t+'" alt="'+i+'">                        <div class="img-desc">'+i+"</div>                    </div>";e.prepend(a),e.append('<div class="clearfix"></div>');var o=e.html();e.after("<div>"+o+"</div>"),e.remove(),n.remove()})},levinfo.contactForm=function(){jQuery.extend(jQuery.validator.messages,{required:"Это поле необходимо заполнить.",remote:"Пожалуйста, введите правильное значение.",email:"Пожалуйста, введите корретный адрес электронной почты.",url:"Пожалуйста, введите корректный URL.",date:"Пожалуйста, введите корректную дату.",dateISO:"Пожалуйста, введите корректную дату в формате ISO.",number:"Пожалуйста, введите число.",digits:"Пожалуйста, вводите только цифры.",creditcard:"Пожалуйста, введите правильный номер кредитной карты.",equalTo:"Пожалуйста, введите такое же значение ещё раз.",accept:"Пожалуйста, выберите файл с правильным расширением.",maxlength:jQuery.validator.format("Пожалуйста, введите не больше {0} символов."),minlength:jQuery.validator.format("Пожалуйста, введите не меньше {0} символов."),rangelength:jQuery.validator.format("Пожалуйста, введите значение длиной от {0} до {1} символов."),range:jQuery.validator.format("Пожалуйста, введите число от {0} до {1}."),max:jQuery.validator.format("Пожалуйста, введите число, меньшее или равное {0}."),min:jQuery.validator.format("Пожалуйста, введите число, большее или равное {0}.")}),$(".js-contact-form").validate({rules:{name:"required",message:"required",email:{required:function(){return 0==$('[name="phone"]').val().length},email:!0},phone:{required:function(){return 0==$('[name="email"]').val().length}}},submitHandler:function(e){var t={beforeSubmit:function(){$(".js-form-error").hide(),$(e).find('[type="submit"]').addClass("loading").attr("disabled","disabled")},success:function(t){t.status?($(".js-form-success").fadeIn(),setTimeout(function(){$(".js-form-cont").slideUp()},3e3)):$(".js-form-error").show(),$(e).find('[type="submit"]').removeClass("loading").removeAttr("disabled")},error:function(){$(".js-form-error").show(),$(e).find('[type="submit"]').removeClass("loading").removeAttr("disabled")}};$(e).ajaxSubmit(t)}}),$('[name="phone"], [name="email"]').on("input",function(){$("#phone-error").is(":visible")&&$("#email-error").is(":visible")&&$(".js-contact-form").valid()})},levinfo.main=function(){levinfo.selects(),$(".js-fancybox").length&&levinfo.fancybox(),$(".js-tabs-parent").length&&levinfo.stabs(),$(".js-slider").length&&levinfo.fotorama(),$(".js-audio-cont").length&&levinfo.audio(),$(".js-slink").length&&$(".js-stab").length&&levinfo.simpletabs(),$(".js-open-law").length&&levinfo.lawPopup(),$(".js-news-text").length&&levinfo.newsText(),$(".js-contact-form").length&&levinfo.contactForm(),$(".js-autosize").autosize()},$(function(){levinfo.main()});